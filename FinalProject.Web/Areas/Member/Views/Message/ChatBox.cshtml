@model FinalProject.Associate.VM.MessageUserVm
@{
    ViewData["Title"] = "ChatBox";
    Layout = "~/Areas/Member/Views/Shared/_Layout.cshtml";
    var user = User.Identity.Name;
}
<input type="hidden" value="@user" id="userInput" />
<input type="hidden" value="@ViewBag.RecipientId" id="recipient" />
<div class="col-md-12 mt-2">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <span class="glyphicon glyphicon-comment"></span><b style="color:white">Chat</b>
        </div>
        <div class="panel-body">
            <ul id="messageList">
                @foreach (var item in Model.Messages)
                {
                   <li class="left clearfix">
                        <span class="chat-img pull-left">
                            <img  src="~/media/user/@Url.Content(item.SenderUser.ImagePath)" alt="User Avatar" height="50" width="50" class="img-circle  " />
                        </span>
                        <div class="chat-body clearfix pb-1 mb-0 ml-2" style="color:white">
                            <div class="header">
                                <strong class="primary-font"><a asp-action="Profile" asp-controller="Profile" asp-route-userName="@item.SenderUser.UserName">@item.SenderUser.UserName</a></strong> <small class="pull-right text-muted">
                                    <span class="glyphicon glyphicon-time"></span>@item.CreatedDate
                                </small>
                            </div>
                            <p>
                                @item.Content
                            </p>
                        </div>
                    </li>

                }
              </ul>
         </div>
        <div class="panel-footer">
            <div class="input-group">
                <input id="messageInput" type="text" class="form-control input-sm" placeholder="Type your message here...">
                <span class="input-group-btn">
                    <input type="button" id="sendButton" value="Send Message" />
                </span>
            </div>
        </div>
    </div>
</div>
<img src="~/media/user/@Url.Content(ViewBag.Image)" width="0" height="0" style="visibility:hidden" id="userImage1" />
@section scripts2{
    <script src="~/js/signalr/dist/browser/signalr.js"></script>
    <script src="~/js/chat.js"></script>
}